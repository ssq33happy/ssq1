<!doctype html>
<html>
	<body>
		
	<canvas id="can" width="400" height="400" style="background:Black">
	</canvas>
	
	<script>
	
		var sn=[42,41],dz=43,fx=1,n,ctx=document.getElementById("can").getContext("2d");
		
		function draw(t,c){
		    ctx.fillStyle=c;
		    ctx.fillRect(t%20*20+1,~~(t/20)*20+1,18,18);
		}
		
		//sn[1]-sn[0] = 41-42 = -1; 37 38 39 40 左上右下  左键时候fx  = 1；其他键fx 等于 -20,1,20
		document.onkeydown=function(e){fx=sn[1]-sn[0]==(n=[-1,-20,1,20][(e||event).keyCode-37]||fx)?fx:n};
		
		// ！直接调用函数 unshift 在数组开头添加一个元素 每新增一个方块，SN数组长度会增加
		!function(){
			console.log("执行一次");
		    sn.unshift(n=sn[0]+fx);
		    console.log(sn);
		    if(sn.indexOf(n,1)>0 || n<0||n>399||fx==1&&n%20==0||fx==-1&&n%20==19) {
		    	return alert("GAME OVER");
		    }
		    draw(n,"Lime");
		    if(n==dz){
		        while(sn.indexOf(dz=~~(Math.random()*400))>=0);
		        draw(dz,"Yellow");
		    }else{
		    	 draw(sn.pop(),"Black");
		    }
		       
		        /* 
		        <p>arguments 该对象代表正在执行的函数和调用它的函数的参数。[function.]arguments[n]参数<br>function：选项。当前正在执行的 Function 对象的名字。 <br>n ：选项。要传递给 Function 对象的从0开始的参数值索引。说明Arguments是进行函数调用时，除了指定的参数外，还另外创建的一个隐藏对象。Arguments是一个类似数组但不是数组的对象，说它类似数组是因为其具有数组一样的访问性质及方式，可以由arguments[n]来访问对应的单个参数的值，并拥有数组长度属性length。还有就是arguments对象存储的是实际传递给函数的参数，而不局限于函数声明所定义的参数列表，而且不能显式创建 arguments对象。arguments对象只有函数开始时才可用。<br><br>下边例子详细说明了这些性质<br></p>
		        
		        */
		    setTimeout(arguments.callee,130);
		}();
	</script>
	</body>
</html>